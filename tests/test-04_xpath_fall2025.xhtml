<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <!--#set var="title" value="Test #4: XPath
        " -->
    <!--#config timefmt="%Y-%m-%dT%X%z" -->
    <head>
        <title>XPath Test</title>
        <link rel="stylesheet" type="text/css" href="../css/style_key.css"/>
        <link href="https://fonts.googleapis.com/css?family=Assistant" rel="stylesheet"/>
    </head>
    <body class="line-numbers">
        <!--#include virtual="inc/dh-boilerplate.html" -->
        <h2>XPath Test</h2>
        <section>
            <h3>Instructions</h3>
            <p>This test has two required parts plus an optional bonus (extra credit) section. The
                first part asks questions about your understanding of XPath and the second asks you
                to create XPath expressions and use them to learn about a <i>Bad Hamlet</i> file
                similar to the one you’ve been using for practice. You’ll find the file at <a
                    href="http://dh.obdurodon.org/even-worse-hamlet.xml">http://dh.obdurodon.org/even-worse-hamlet.xml</a>.
                This file contains altered content that is different from the <q>Bad Hamlet</q>
                version that you’ve been using in your XPath assignments, so be sure to work with
                this new file.</p>
            <p>Don’t forget to set the XPath version in the &lt;oXygen/&gt; XPath toolbar or XPath
                builder to 3.1. You may also want to revisit our <a href="http://dh.obdurodon.org/functions.xhtml">XPath
                    functions we use most tutorial</a>.</p>
        </section>
        <section>
            <h3>Part 1: Questions about XPath</h3>
            <ol>
                <li><p>Define <dfn>nodes</dfn>, <dfn>sequences</dfn> and <dfn>atomic values</dfn>.
                        Give an example of how each of those concepts might arise when you use XPath
                        to explore <cite>Hamlet</cite> in &lt;oXygen/&gt;. Your examples of these
                        three concepts might involve either XPath expressions themselves or the
                        results that XPath expressions return.</p></li>
                <li><p>What is the difference between an <dfn>axis</dfn> and a <dfn>predicate</dfn>
                        in a path expression? To answer this question, give an example of each
                        within an XPath expression, explain how they are distinguished syntactically
                        (that is, how each is spelled when used in an XPath expression), and explain
                        what each contributes to the overall meaning of the XPath expression you use
                        to illustrate them.</p></li>
                <li><p>Explain the difference between the simple map operator
                        <code class="language-xquery">!</code> and the arrow operator
                        <code class="language-xquery">=></code>. For example, consider the two
                        expressions <code class="language-xquery">//sp ! count(.)</code> and
                        <code class="language-xquery">//sp => count()</code> and how they return
                        different results. Give one example each of a reasonable way you might use
                        these operators to explore <cite>Hamlet</cite>.</p></li>
            </ol>
        </section>
        <section>
            <h3>Part 2: Creating and using XPath expressions </h3>
            <p>The functions we used to answer the following questions include
                <code class="language-xquery">contains()</code>,
                <code class="language-xquery">count()</code>,
                <code class="language-xquery">distinct-values()</code>,
                <code class="language-xquery">not()</code>,
                <code class="language-xquery">sort()</code>,
                <code class="language-xquery">string-join()</code>. All of these are described in
                Michael Kay except <code class="language-xquery">sort()</code> because it was
                introduced in XPath 3.1 and Mike’s book was written when 2.0 was the most recent
                version. The <code class="language-xquery">sort()</code> function returns a sequence
                of items sorted into alphabetical order. There may be more than one correct answer
                to some of the questions.</p>
            <p>Questions 5–9 build on one another. If you get stuck at some point, you can still
                receive partial credit for the following questions by explaining and illustrating
                how you would answer them if you had the requisite input. For example, if you can’t
                get the 77 lines you want for question 5, select some alternative lines as input
                into question 6 and describe and illustrate how you would find the speakers of
                speeches that contain those lines.</p>
        </section>
        <ol>
            <li><p>All line elements in the play <code class="language-xml">&lt;l&gt;</code> are
                    supposed to have attributes of type <code class="language-xquery">@n</code>, but
                    some don't, which is a markup mistake. What XPath expression will select the
                    lines that don’t have <code class="language-xquery">@n</code> attributes? (Hint:
                    There are five such lines.)</p></li>
            <li><p>Building on the preceding question, what XPath expression will tell you how many
                    such lines there are? Your expression must return a single integer value, that
                    is, XPath needs to do the counting instead of returning the lines and your
                    finding the answer with your human eyeballs by looking next to the
                        <q>Description</q>.</p></li>
            <li><p>Hamlet’s Ghost (referred to as <q>Ghost</q>), although not appearing much, is an
                    important symbol in the play as it represents Hamlet’s dead father. What XPath
                    expression finds the scenes where <q>Ghost</q> is featured as a speaker? (Hint:
                    There are 2 such scenes.)</p></li>
            <li><p>What XPath expression finds all speeches spoken by <q>Ghost</q>? Your XPath
                    expression must select the speeches themselves, and not just the speakers.
                    (Hint: there are 14 such speeches.)</p></li>
            <li><p>What XPath expression will find every line
                    (<code class="language-xml">&lt;l&gt;</code> or
                    <code class="language-xml">&lt;ab&gt;</code> element) in which the name
                        <q>Hamlet</q> is spoken? Caution: There are lines that contain stage
                    direction (<code class="language-xml">&lt;stage&gt;</code>) elements the mention
                    Hamlet’s name, but being mentioned inside a stage direction isn’t the same as
                    being spoken. Your XPath expression must include only lines where the name
                        <q>Hamlet</q> is spoken within speech. (Hint: there are 77 such lines, 10
                    instances of <code class="language-xml">&lt;l&gt;</code> and 67 of
                    <code class="language-xml">&lt;ab&gt;</code>.)</p></li>
            <li><p>What XPath expression will return the speakers of each speech that contains a
                    line (<code class="language-xml">&lt;l&gt;</code> or
                    <code class="language-xml">&lt;ab&gt;</code> element) that mentions
                        <q>Hamlet</q>? (Hint: There are 68 such speakers because some speeches
                    contain more than one line that mentions <q>Hamlet</q>. Some of the speaker
                    names are repeats because the same person may have multiple speeches that
                    mention Hamlet by name.)</p></li>
            <li><p>What expression would deduplicate the results of the last expression? In other
                    words, you should return a sequence of strings where each name is listed only
                    once. (Hint: There are 13 such speaker names.)</p></li>
            <li><p>What XPath expression will sort the sequence in alphabetical order?</p></li>
            <li><p>What Xpath expression will return the sequence as a comma-separated
                list?</p></li>
        </ol>
        <section>
            <h3>Part 3: Optional extra-credit questions</h3>
            <ol>
                <li><p>What XPath expression will return a deduplicated list of all element names
                        within the document? (Hint: You’ll need the
                        <code class="language-xquery">name()</code> function, which you can look up
                        in Michael Kay. There are 28 distinct element names.)</p></li>
                <li><p>What XPath expression will select all speech
                        <code class="language-xml">&lt;sp&gt;</code> elements that have both
                        <code class="xml">&lt;l&gt;</code> and <code class="xml">&lt;ab&gt;</code>
                        children? (Hint: There are 7 such speeches.)</p></li>
                <li><p>What XPath expression will return the ratio of
                        <code class="xml">&lt;l&gt;</code> to <code class="xml">&lt;ab&gt;</code>
                        children for each of the speeches selected in the previous step and sort
                        them from lowest to highest? (Hint: There are 7 such ratios, ranging from a
                        low of 0.117 to a high of 6, and the number 1 appears twice in that list
                        because two of the speeches in question have the same number of elements of
                        both types.)</p></li>
                <li><p>Given the 7 values in the preceding question, what XPath expressions will
                        return just the lowest value,just the highest value, and just the average
                        (arithmetic mean) of all 7 values? (Hint: You’ll want to look up the
                        appropriate functions in Michael Kay.)</p></li>
            </ol>
        </section>
        <section>
            <h3>What to submit</h3>
            <p>Write your answers in a <em>properly formatted</em> markdown file with a filename
                that conforms to our usual <a href="http://dh.obdurodon.org/file-naming_conventions.xhtml">filenaming
                    conventions</a>, with an <i>.md</i> filename extension and upload it to Canvas.
                You can remind yourself about markdown syntax at the <a
                    href="https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax"
                    >GitHub three-minute guide to Mastering markdown</a> that you read earlier. The
                test is open book and you can use any references you’d like, except that you cannot
                receive help from another person.</p>
            <p> Should you have any questions, please ask in the <i>#xpath</i> channel in our Slack
                workspace. We can’t give you the answer, but we’ll do whatever we can short of that
                to help.</p>
        </section>
    </body>
</html>
